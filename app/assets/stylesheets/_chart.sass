$chart-header-background-color: #dfe8f3
$chart-header-title-color: #374d5c
$chart-header-icon-color: #8895b2

.chart_holder
  width: 600px
  display: inline-block
  min-height: 300px
  vertical-align: top
  margin: 0 2px 15px 0
  header
    background: $chart-header-background-color
    display: flex
    height: 30px
    h3
      color: $chart-header-title-color
      flex: 1
      font-size: 14px
      line-height: 30px
      margin: 0 0 3px 0
      overflow: hidden
      padding: 0 0 0 11px
      text-overflow: ellipsis
      white-space: nowrap
    .actions
      margin-left: 10px
      a
        color: $chart-header-icon-color
        text-decoration: none

        display: block
        float: right
        padding: 9px 8px 8px
        text-align: center
        vertical-align: text-top
        width: 15px
        font-size: 14px
        border-left: 1px solid white

        &.fa-table
          padding: 10px 8px 7px

        &:hover
          background: #71a2cf
          color: white

        &.show_related
          // width: 100px

      a.show_related, a.show_previous
        border-left: none
        line-height: 17px
        padding-left: 0
        padding-top: 6px
        padding-bottom: 4px
        width: auto

        &:hover
          background: transparent
          .toggle
            background: darken($chart-header-icon-color, 11%)

      .toggle
        background: $chart-header-icon-color
        border-radius: 17px
        color: $chart-header-background-color
        display: inline-block
        font-size: 11px
        height: 17px
        padding: 0 6px
        position: relative

        &.off
          padding-left: 18px
          &:before
            background: $chart-header-background-color
            border-radius: 50%
            bottom: 2px
            content: ""
            height: 13px
            left: 2px
            position: absolute
            width: 13px

        &.on
          padding-right: 18px
          &:after
            background: $chart-header-background-color
            border-radius: 50%
            bottom: 2px
            content: ""
            height: 13px
            right: 2px
            position: absolute
            width: 13px

.charts_container
  position: relative
  .chart_canvas
    // zoomed charts and dashboard popups redefine the height
    min-height: 330px
    background-color: #fff

    .empty
      svg, .legend, .d3-chart-date-select
        display: none

    select.d3-chart-date-select
      float: right
      margin: 10px 0 10px 10px

  .loading, .empty-wrapper
    background: lighten($chart-header-background-color, 6%)
    border-top: 1px solid white
    height: 330px
    width: 100%
    text-align: center

  .loading
    background-image: asset-url("charts/loading.gif")
    background-position: center center
    background-repeat: no-repeat

  .empty-wrapper
    p
      color: lighten($chart-header-title-color, 5%)
      padding-top: 150px
      margin: 0 0 5px

    &.has-annotation p
      padding-top: 140px

    .annotation
      color: lighten($chart-header-icon-color, 5%)
      font-size: 12px

  .table_canvas
    // free to expand as needed
    background-color: #fff
    padding-top: 10px
  .chart_not_finished
    display: none
    position: absolute
    top: 5px
    height: 53px
    width: 264px
    right: -5px
    z-index: 3
    background: url(/assets/layout/still_to_do.png) no-repeat
  // jqplot charts set labels with absolute positioning and they often
  // overlap charts under them
  .jqplot-target
    margin-bottom: 100px

// Disable background color for loading div for charts in dashboard popups.
#dashboard_popup .charts_container .chart_canvas .loading
  background-color: white

// ======== Wells ============================================================

.chart_canvas
  .well
    margin-top: 10px

.well
  margin-top: 0
  padding: 3px 40px 15px
  background-color: #F0F0F0
  text-align: center

  h4
    font-size: 15px

// ======== Tables ===========================================================

table
  &.chart
    width: 100%
    border-spacing: 0
    border-bottom: 1px solid #71a2cf
    &.has-total
      border-bottom: none
    &.centered
      thead, tbody
        td, th
          text-align: center
    .novalue
      color: #999
    thead
      td
        border-bottom: 1px solid #71a2cf
        border-right: 1px solid #71a2cf
      th
        background: #71a2cf
        border: 1px solid #71a2cf
        color: white
        font-weight: normal
        text-align: right
      &.subhead
        td, th
          background: #8eB5d8
          border-color: #7fa5c7
      & + thead.subhead
        td, th
          border-top-color: #9dbedc
    tr
      &.even
        background-color: #eee
    td, th
      font-size: 11px
      padding: 5px
      line-height: 1.4
      &.bordered
        border: 1px solid #e5e5e5

    td
      text-align: right
      &.warning
        color: #ef1d1d
      &.blank
        color: #999
    tbody
      th, td
        border-right: 1px solid #e5e5e5
        border-top: 1px solid #e5e5e5
        &:first-child
          border-left: 1px solid #e5e5e5
      tr:first-child
        th, td
          border-top: none
    tfoot th, tfoot td
      border-top: 1px solid #71a2cf
  &#power_plants
    th.unit
      font-weight: normal
      text-align: center
    .border-rgt
      border-right: 1px solid #999
    tfoot
      tr
        border-top: 1px solid #999
        border-bottom: 3px double #999
      td, th
        border: 1px solid #e5e5e5
      td
        font-weight: bold
  &.autostripe
    tbody tr:nth-child(2n+1)
      background-color: #f5f5f5
  &.condensed
    td, th
      font-size: 10px
      padding: 0px
      line-height: 18px
  &.profitability
    border-bottom: none
    .technology
      white-space: nowrap
    .position
      text-align: center
    tr
      &.profitable
        color: green
      &.conditionally_profitable
        color: orange
      &.unprofitable
        color: red
    th
      font-weight: normal
    tfoot
      td
        text-align: right
        span.legend_block
          float: left
          display: block
          width: 10px
          height: 10px
          margin: 4px 5px 0 10px
        span.legend_label
          float: left
          display: block

  &#flexibility
    margin-bottom: 10px

// =========  D3 charts ======================================================

div.d3_container
  &.vertical_stacked_bar, &.waterfall, &.target_bar, &.co2_emissions, &.merit_order, &.cost_capacity_bar, &.category_bar
    svg
      shape-rendering: crispEdges
  text
    font-family: $body-font-family
    font-size: 12px
  .year.small
    fill: #777
    font-size: 11px
  .negative-region
    fill: #000
    opacity: 0.05
  .x_axis, .y_axis
    line, path
      fill: none
      stroke: #333
    path.domain
      display: none
    .minor
      stroke-opacity: 0.5
  .y_axis.inner_grid, .x_axis.inner_grid
    g line
      shape-rendering: crispEdges
      stroke-width: 1
    line
      stroke-width: 0.5
      stroke: #000
      opacity: 0.15
      &.bold
        opacity: 1

  g.legend text
    font-size: 12px

  &.merit_order_excess_events
    .notification
      background-color: #f0f0f0
      border-radius: 5px
      left: 0
      margin: 140px 0 0 0
      padding: 5px 10px
      position: absolute
      top: 0

    rect
      transition: fill 0.3s

  &.category_bar .serie.present
    opacity: 0.7
  &.bezier
    .y_axis .tick:first-of-type line
      opacity: 0.75
    .y_axis .tick:not(:first-of-type) line
      stroke-dasharray: 2, 2
      opacity: 0.2

  .subzero
    fill: black
    opacity: 0.05

// -------- generic charts  --------------------------------------------------

.d3_container
  &.sankey
    g.node
      rect
        shape-rendering: crispEdges
        fill-opacity: .75
      text.label
        text-shadow: 0 0 2px #fff, 0 0 3px #fff, 0 0 4px #fff, 0 0 5px #fff
        font-size: 11px
  &.mekko
    rect.carrier
      stroke: #333
      stroke-width: 0.5px
    .y_axis
      text
        font-size: 10px
  &.target_bar
    text.target_label
      font-weight: bold
      font-size: 10px
    text.target_unit
      font-size: 9px
    text.year_label
      fill: #fff
      font-size: 9px
    .x_axis
      line, path
        stroke-opacity: 0.4
      text
        font-size: 9px
  &.waterfall
    text.serie
      font-size: 9px
  &.merit_order
    rect.merit_order_node
      fill-opacity: .80
    .legend text
      font-size: 11px
  &.treemap
    div.cell
      border: 1px solid white
      overflow: hidden
      position: absolute
      font: 9px sans-serif
      line-height: 12px
      text-indent: 2px
  &.storage
    .x_axis text.label,
    .y_axis text.label
      font-family: sans-serif
      font-size: 11.5px
      font-weight: bold

  &.import_export_cwe
    .x_axis text.label,
    .y_axis text.label
      font-family: sans-serif
      font-size: 11.5px
      font-weight: bold

  .indicative_label
    cursor: default
    font-family: sans-serif
    font-size: 20px
    font-weight: bold
    fill: gray
    text-shadow: 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white

// ------- zoomed charts -----------------------------------------------------
#zoomed_chart
  h2
    margin-top: 0
    padding: 10px
    background: $chart-header-background-color
    color: #224368
  #zoomed_chart_wrapper
    padding: 10px
    .chart_canvas
      height: 320px
  .chart_holder
    width: 100%

  table.chart
    td, th
      font-size: 14px
      padding: 5px

// ------ chart selector -----------------------------------------------------

#select_charts
  height: 100%
  h1, > h2
    clear: both
    font-size: 18px
    padding-left: 10px
    background-color: $chart-header-background-color
    color: #224368
    padding: 10px
    margin-top: 0
  > h2
    font-size: 13px
    padding: 5px 10px
    margin-top: -12px
    background-color: #F2FAFF
  div
    cursor: pointer
    padding: 5px
    float: left
    width: 280px
    height: 40px
    margin-left: 10px
    margin-bottom: 10px
    &:hover
      background: $chart-header-background-color
    a
      img
        float: left
      h2
        font-size: 13px
        margin: 0 0 0 60px

// Legend

.legend
  margin-left: 10px
  clear: both

  .legend-column
    display: inline-block
    vertical-align: top

  .legend-item
    line-height: 20px
    font-size: 12px

    span.rect
      border-radius: 2px
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1)
      display: inline-block
      height: 11px
      margin: -2px 5px 0 0
      vertical-align: middle
      width: 11px

    &.target_line span.rect
      border-radius: 0
      box-shadow: none
      height: 2px

// Clickable legends in the dynamic demand curve chart.
.dynamic_demand_curve
  .legend
    .legend-item
      &.hidden
        display: block
      &.hidden .rect
        opacity: 0.5
      &.target_line
        color: $link-color
        cursor: pointer
        &:hover
          color: #2E5671
