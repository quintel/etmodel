:ruby
  country  = Current.setting.area_code
  country  = country.split('-')[0] if country.include?('-')
  map      = "/assets/maps/#{country}_map.png"
  map_grey = "/assets/maps/#{country}_map_gray.png"

.constraint_box_content
  %p= @constraint.description.try :short_content

  .present{:style => "position: relative; background: url(#{map_grey}) repeat-x; height: 105px; width: 70px"}
    %h3.tal{:style => "position:absolute; left: 0; top: 0; margin: 0; padding: 0"}
      = Current.setting.start_year
    .overlay{:style => "background: url(#{map}) repeat-x; height: 105px;"} &nbsp;

  %br

  .future{:style => "position: relative; background: url(#{map_grey}) repeat-x; height: 105px; width: 70px"}
    %h3.tal{:style => "position:absolute; left: 0; top: 0; margin: 0; padding: 0"}
      = Current.setting.end_year
    .overlay{:style => "background: url(#{map}) repeat-x; height: 105px;"} &nbsp;
:javascript
  var q = gqueries.find_or_create_by_key('bio_footprint');
  App.call_api();
  $("body").bind("dashboardUpdate", function(){
    var present = q.get('present_value');
    var future  = q.get('future_value');
    $("div.present .overlay").css('width', '' + 70 * present + 'px')
    $("div.future .overlay").css('width', '' + 70 * future +'px')
  });
