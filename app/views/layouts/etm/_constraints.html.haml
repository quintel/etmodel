#constraints_container
  #constraints
    - @constraints.each do |c|
      :ruby
        opts = {
          :id    => "constraint_#{c.id}",
          :class => (c.id == 1) ? 'first' : nil,
          :href   => "/constraints/#{c.id}"
        }

      .constraint{opts}
        .header
          = raw I18n.t("dashboard.#{c.name}")
          %span.sub_header
        %strong

    <a href="#" id="dashboard_change">Change</a>
    .clear

    %script
      - @constraints.each do |c|
        dashboard.add(
        = { :id => c.id, :key => c.key, :gquery_key => c.gquery_key }.to_json.html_safe
        );
      - @goals.each do |goal|
        :ruby
          goal_opts = {
            :goal_id          => goal.id,
            :name             => t("policies.#{goal.name.humanize}"),
            :success_query    => gquery_id(goal.reached_query).to_s,
            :value_query      => gquery_id(goal.query).to_s,
            :target_query     => gquery_id(goal.target_query).to_s,
            :user_value_query => gquery_id(goal.user_value_query).to_s,
            :unit             => goal.unit,
            :display_fmt      => goal.display_format
          }
        new PolicyGoal(#{goal_opts.to_json.html_safe});
