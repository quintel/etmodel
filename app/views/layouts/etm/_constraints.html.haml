#constraints_container
  #constraints
    = render :partial => 'layouts/etm/constraint_items', :locals => { :constraints => @constraints }

    <a href="#" id="dashboard_change">Change</a>
    .clear

    %script
      - @constraints.each do |c|
        == dashboard.add(#{ c.to_json.html_safe });

      - @goals.each do |goal|
        :ruby
          goal_opts = {
            :goal_id          => goal.id,
            :name             => t("policy_goals.#{goal.key}"),
            :success_query    => gquery_id(goal.reached_query).to_s,
            :value_query      => gquery_id(goal.query).to_s,
            :target_query     => gquery_id(goal.target_query).to_s,
            :user_value_query => gquery_id(goal.user_value_query).to_s,
            :unit             => goal.unit,
            :display_fmt      => goal.display_format
          }
        new PolicyGoal(#{goal_opts.to_json.html_safe});
