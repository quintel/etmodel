<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>jquery.quinn.js</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>jquery.quinn.js</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <p>vim: set sw=4 ts=4 et:</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-2'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
        </div>
        <p>Event names used for setting up drag events.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">DRAG_E</span>           <span class="o">=</span> <span class="s1">&#39;mousemove&#39;</span><span class="p">,</span>
        <span class="nx">DRAG_START_E</span>     <span class="o">=</span> <span class="s1">&#39;mousedown&#39;</span><span class="p">,</span>
        <span class="nx">DRAG_END_E</span>       <span class="o">=</span> <span class="s1">&#39;mouseup&#39;</span><span class="p">,</span>
        <span class="nx">IS_TOUCH_ENABLED</span> <span class="o">=</span>  <span class="kc">false</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">DRAG_E</span>           <span class="o">=</span> <span class="s1">&#39;touchmove&#39;</span><span class="p">;</span>
        <span class="nx">DRAG_START_E</span>     <span class="o">=</span> <span class="s1">&#39;touchstart&#39;</span><span class="p">;</span>
        <span class="nx">DRAG_END_E</span>       <span class="o">=</span> <span class="s1">&#39;touchend&#39;</span><span class="p">;</span>
        <span class="nx">IS_TOUCH_ENABLED</span> <span class="o">=</span>  <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-3'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-3">&#182;</a>
        </div>
        <p>Given an event, returns the horizontal location on the page on which
the event occurred.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">locationOfEvent</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">oEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">oEvent</span><span class="p">.</span><span class="nx">touches</span> <span class="o">&amp;&amp;</span> <span class="nx">oEvent</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">oEvent</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageX</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">oEvent</span><span class="p">.</span><span class="nx">changedTouches</span> <span class="o">&amp;&amp;</span> <span class="nx">oEvent</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">oEvent</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageX</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-4'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
        </div>
        <p>Determines to what minimum and maximum value the slider should be
drawn. Defaults to whatever minimum and maximum the user gave, but will
prefer an explicit &ldquo;drawTo&rdquo; option is one is provided.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">drawToOpts</span> <span class="p">(</span><span class="nx">drawTo</span><span class="p">,</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">drawTo</span> <span class="o">=</span> <span class="nx">drawTo</span> <span class="o">||</span> <span class="p">{};</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">left</span><span class="o">:</span>  <span class="nx">_</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">drawTo</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>  <span class="o">?</span> <span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span>  <span class="o">:</span> <span class="nx">min</span><span class="p">,</span>
            <span class="nx">right</span><span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">drawTo</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">drawTo</span><span class="p">.</span><span class="nx">right</span> <span class="o">:</span> <span class="nx">max</span>
        <span class="p">};</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-Quinn'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Quinn">&#182;</a>
        </div>
        <h2>Quinn</h2>

<p>Quinn is the main slider class, and handles setting up the slider UI,
the element events, values, etc.</p>

<p><code>wrapper</code> is expected to be a DOM Element wrapped in a jQuery instance.
The slider will be placed into the wrapper element, respecting it&rsquo;s
width, padding etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">Quinn</span> <span class="p">(</span><span class="nx">wrapper</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">opts</span><span class="p">;</span>

        <span class="nx">_</span><span class="p">.</span><span class="nx">bindAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;clickBar&#39;</span><span class="p">,</span> <span class="s1">&#39;startDrag&#39;</span><span class="p">,</span> <span class="s1">&#39;drag&#39;</span><span class="p">,</span> <span class="s1">&#39;endDrag&#39;</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span>        <span class="o">=</span> <span class="nx">wrapper</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">Quinn</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">callbacks</span>      <span class="o">=</span> <span class="p">{};</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span>       <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span>   <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span>  <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">drawTo</span>         <span class="o">=</span> <span class="nx">drawToOpts</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">max</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">model</span>          <span class="o">=</span> <span class="k">new</span> <span class="nx">Model</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">strict</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span>       <span class="o">=</span> <span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">wrapperWidth</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">wrapperOffset</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">,</span>  <span class="nx">opts</span><span class="p">.</span><span class="nx">setup</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;begin&#39;</span><span class="p">,</span>  <span class="nx">opts</span><span class="p">.</span><span class="nx">begin</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;drag&#39;</span><span class="p">,</span>   <span class="nx">opts</span><span class="p">.</span><span class="nx">drag</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">change</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;abort&#39;</span><span class="p">,</span>  <span class="nx">opts</span><span class="p">.</span><span class="nx">abort</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">disable</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-6'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
        </div>
        <p>Finish off by triggering the setup callback.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>The current Quinn version.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">=</span> <span class="s1">&#39;1.0.1&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-Event_Handling'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Event_Handling">&#182;</a>
        </div>
        <h3>Event Handling</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-on'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-on">&#182;</a>
        </div>
        <h3>on</h3>

<p>Binds a <code>callback</code> to be run whenever the given <code>event</code> occurs. Returns
the Quinn instance permitting chaining.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">[</span><span class="nx">event</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">[</span><span class="nx">event</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">[</span><span class="nx">event</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-trigger'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-trigger">&#182;</a>
        </div>
        <h3>trigger</h3>

<p>Runs the callbacks of the given evengt type.</p>

<p>If any of the callbacks return false, other callbacks will not be run,
and trigger will return false; otherwise true is returned.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">callbacks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">callbacks</span><span class="p">[</span><span class="nx">event</span><span class="p">]</span> <span class="o">||</span> <span class="p">[],</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">callback</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="k">void</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">callback</span> <span class="o">=</span> <span class="nx">callbacks</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">callback</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section- Values,_and_Domain_Logic'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section- Values,_and_Domain_Logic">&#182;</a>
        </div>
        <h2> Values, and Domain Logic</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-enable'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-enable">&#182;</a>
        </div>
        <h3>enable</h3>

<p>Enables the slider so that a user may change its value. Triggers the
&ldquo;enabled&rdquo; event unless the instance was already enabled.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">enable</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;enabled&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-disable'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-disable">&#182;</a>
        </div>
        <h3>disable</h3>

<p>Disables the slider so that a user may not change its value. Triggers
the &ldquo;disabled&rdquo; event unless the instance was already disabled.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">disable</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-setValue'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-setValue">&#182;</a>
        </div>
        <h3>setValue</h3>

<p>Updates the value of the slider to <code>newValue</code>. If the <code>animate</code>
argument is truthy, the change in value will be animated when updating
the slider position. The drag callback may be skipped if <code>silent</code> is
true.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">animate</span><span class="p">,</span> <span class="nx">silent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">setTentativeValue</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">animate</span><span class="p">,</span> <span class="nx">silent</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-setTentativeValue'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-setTentativeValue">&#182;</a>
        </div>
        <h3>setTentativeValue</h3>

<p>Used internally to set the model value while ensuring that the
necessary callbacks are fired.</p>

<p>See <code>setValue</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTentativeValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">animate</span><span class="p">,</span> <span class="nx">silent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">preDragValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
            <span class="nx">prevScalar</span>   <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">nextScalar</span>   <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">scalar</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">newValue</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="nx">newValue</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-16'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
        </div>
        <p>If the slider is a range (more than one value), but only a number
was given, we need to alter the given value so that we set the
other values also.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">newValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>Without an active handle, we don&rsquo;t know which value we are
supposed to set.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">scalar</span>   <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">sanitizeValue</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
            <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-18'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
        </div>
        <p>Ensure that the handle doesn&rsquo;t &ldquo;cross over&rdquo; a higher or
lower handle.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">prevScalar</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="nx">nextScalar</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">prevScalar</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">scalar</span> <span class="o">&lt;=</span> <span class="nx">prevScalar</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">scalar</span> <span class="o">=</span> <span class="nx">prevScalar</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">nextScalar</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">scalar</span> <span class="o">&gt;=</span> <span class="nx">nextScalar</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">scalar</span> <span class="o">=</span> <span class="nx">nextScalar</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">newValue</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span><span class="p">]</span> <span class="o">=</span> <span class="nx">scalar</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">newValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">newValue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span>
                <span class="p">(</span><span class="o">!</span> <span class="nx">silent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;drag&#39;</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">)))</span> <span class="p">{</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">preDragValue</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>If the drag callback failed, we need to send another drag
event so that the developer has the chance to respond.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="p">(</span><span class="nx">newValue</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;drag&#39;</span><span class="p">,</span> <span class="nx">preDragValue</span><span class="p">));</span>

            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;redraw&#39;</span><span class="p">,</span> <span class="nx">animate</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">newValue</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-stepUp'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-stepUp">&#182;</a>
        </div>
        <h3>stepUp</h3>

<p>Increases the value of the slider by <code>step</code>. Does nothing if the slider
is alredy at its maximum value.</p>

<p>The optional argument is an integer which indicates the number of steps
by which to increase the value.</p>

<p>Returns the new slider value</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stepUp</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-21'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
        </div>
        <p>Cannot step a range-based slider.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span> <span class="o">*</span> <span class="p">(</span><span class="nx">count</span> <span class="o">||</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-stepDown'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-stepDown">&#182;</a>
        </div>
        <h3>stepDown</h3>

<p>Decreases the value of the slider by <code>step</code>. Does nothing if the slider
is alredy at its minimum value.</p>

<p>The optional argument is an integer which indicates the number of steps
by which to decrease the value.</p>

<p>Returns the new slider value</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stepDown</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">stepUp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="nx">count</span> <span class="o">||</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-start'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-start">&#182;</a>
        </div>
        <h3>start</h3>

<p>Tells the Quinn instance that the user is about to make a change to the
slider value. The calling function should check the return value of
start &mdash; if false, no changes are permitted to the slider.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;begin&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-24'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-24">&#182;</a>
        </div>
        <p>These attributes are cached so that we don&rsquo;t have to look them up
every time the user drags the handle.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">wrapperWidth</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">wrapperOffset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">left</span><span class="p">;</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-resolve'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-resolve">&#182;</a>
        </div>
        <h3>resolve</h3>

<p>Tells the Quinn instance that the user has finished making their
changes to the slider and that the new value should be retained.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deactivateActiveHandle</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-26'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
        </div>
        <p>The user reset the slider back to where it was.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cm">/* Run the change callback; if the callback returns false then we</span>
<span class="cm">         * revert the slider change, and restore everything to how it was</span>
<span class="cm">         * before. Note that reverting the change will also fire an change</span>
<span class="cm">         * event when the value is reverted.</span>
<span class="cm">         */</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setTentativeValue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>

            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-reject'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-reject">&#182;</a>
        </div>
        <h3>reject</h3>

<p>Aborts a slider change.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deactivateActiveHandle</span><span class="p">();</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;abort&#39;</span><span class="p">);</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-valueFromMouse'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-valueFromMouse">&#182;</a>
        </div>
        <h3>valueFromMouse</h3>

<p>Determines the value of the slider at the position indicated by the
mouse cursor.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">valueFromMouse</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mousePosition</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">positionFromMouse</span><span class="p">(</span><span class="nx">mousePosition</span><span class="p">),</span>
            <span class="nx">delta</span>   <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">right</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">delta</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-positionFromMouse'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-positionFromMouse">&#182;</a>
        </div>
        <h3>positionFromMouse</h3>

<p>Determines how far along the bar the mouse cursor is as a fraction of
the bar&rsquo;s width.</p>

<p>TODO Cache the width and offset when the drag operation begins.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">positionFromMouse</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">mousePosition</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">maxRight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperOffset</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperWidth</span><span class="p">,</span>
            <span class="nx">barPosition</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">mousePosition</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperOffset</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-30'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-30">&#182;</a>
        </div>
        <p>Mouse is to the left of the bar.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">barPosition</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">mousePosition</span> <span class="o">&gt;</span> <span class="nx">maxRight</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-31'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
        </div>
        <p>Mouse is to the right of the bar.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">barPosition</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperWidth</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">barPosition</span> <span class="o">=</span> <span class="nx">mousePosition</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperOffset</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">barPosition</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapperWidth</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-User_Interaction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-User_Interaction">&#182;</a>
        </div>
        <h2>User Interaction</h2>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-startDrag'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-startDrag">&#182;</a>
        </div>
        <h3>startDrag</h3>

<p>Begins a drag event which permits a user to move the slider handle in
order to adjust the slider value.</p>

<p>When <code>skipPreamble</code> is true, startDrag will not run <code>start()</code> on the
assumption that it has already been run (see <code>clickBar</code>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">startDrag</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">skipPreamble</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-34'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-34">&#182;</a>
        </div>
        <p>Only enable dragging when the left mouse button is used.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">IS_TOUCH_ENABLED</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">skipPreamble</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">activateHandleWithEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-35'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-35">&#182;</a>
        </div>
        <p>These events are bound for the duration of the drag operation and
keep track of the value changes made, with the events being removed
when the mouse button is released.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span>
            <span class="nx">on</span><span class="p">(</span><span class="nx">DRAG_END_E</span> <span class="o">+</span> <span class="s1">&#39;.quinn&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">endDrag</span><span class="p">).</span>
            <span class="nx">on</span><span class="p">(</span><span class="nx">DRAG_E</span>     <span class="o">+</span> <span class="s1">&#39;.quinn&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">drag</span><span class="p">).</span></pre></div>
      </td>
    </tr>
    <tr id='section-36'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-36">&#182;</a>
        </div>
        <p>The mouse may leave the window while dragging, and the mouse
button released. Watch for the mouse re-entering, and see what
the button is doing.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter.quinn&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">endDrag</span><span class="p">);</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-drag'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-drag">&#182;</a>
        </div>
        <h3>drag</h3>

<p>Bound to the mousemove event, alters the slider value while the user
contiues to hold the left mouse button.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drag</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setTentativeValue</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">valueFromMouse</span><span class="p">(</span><span class="nx">locationOfEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">)),</span> <span class="kc">false</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-endDrag'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-endDrag">&#182;</a>
        </div>
        <h3>endDrag</h3>

<p>Run when the user lifts the mouse button after completing a drag.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">endDrag</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-39'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-39">&#182;</a>
        </div>
        <p>Remove the events which were bound in <code>startDrag</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span>
            <span class="nx">off</span><span class="p">(</span><span class="nx">DRAG_END_E</span> <span class="o">+</span> <span class="s1">&#39;.quinn&#39;</span><span class="p">).</span>
            <span class="nx">off</span><span class="p">(</span><span class="nx">DRAG_E</span> <span class="o">+</span> <span class="s1">&#39;.quinn&#39;</span><span class="p">).</span>
            <span class="nx">off</span><span class="p">(</span><span class="s1">&#39;mouseenter.quinn&#39;</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-clickBar'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-clickBar">&#182;</a>
        </div>
        <h3>clickBar</h3>

<p>Event handler which is used when the user clicks part of the slider bar
to instantly change the value.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clickBar</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-41'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-41">&#182;</a>
        </div>
        <p>Ignore the click if the left mouse button wasn&rsquo;t used.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">IS_TOUCH_ENABLED</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">activateHandleWithEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">setTentativeValue</span><span class="p">(</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">valueFromMouse</span><span class="p">(</span><span class="nx">locationOfEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">)));</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">startDrag</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-42'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-42">&#182;</a>
        </div>
        <p>Given a click or drag event, determines which model &ldquo;value&rdquo; is closest
to the clicked location and tells the view to activate the handle.
Does nothing if a handle is already active.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">activateHandleWithEvent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">closestValue</span><span class="p">,</span> <span class="nx">handleIndex</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">valueFromMouse</span><span class="p">(</span><span class="nx">locationOfEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">));</span>

        <span class="nx">closestValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">handleValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">handleValue</span> <span class="o">-</span> <span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="nx">handleIndex</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="nx">closestValue</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">handleIndex</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">=</span> <span class="nx">handleIndex</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;handleOn&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-43'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-43">&#182;</a>
        </div>
        <p>Deactivates the currently active handle. Does nothing if no handle is
active.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">deactivateActiveHandle</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;handleOff&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">activeHandle</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-Model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Model">&#182;</a>
        </div>
        <h2>Model</h2>

<p>Holds the current Quinn value, ensures that the value set is valid
(within the <code>range</code> bounds, one of the <code>only</code> values, etc).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">Model</span> <span class="p">(</span><span class="nx">quinn</span><span class="p">,</span> <span class="nx">initiallyStrict</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">opts</span><span class="p">,</span> <span class="nx">initialValue</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">quinn</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">step</span>    <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">only</span>    <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">only</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">values</span>  <span class="o">=</span> <span class="p">[];</span>

        <span class="cm">/* The minimum and maximum need to be &quot;fixed&quot; so that they are a</span>
<span class="cm">         * multiple of the &quot;step&quot; option. For example, if given a step of 5</span>
<span class="cm">         * then we must round a minimum value of 2 up to 5, and a maximum</span>
<span class="cm">         * value of 97 down to 95.</span>
<span class="cm">         *</span>
<span class="cm">         * Note that values are always rounded so that they stay within the</span>
<span class="cm">         * given minimum and maximum range. 2 cannot be rounded down to 0,</span>
<span class="cm">         * since that is lower than the value provided by the user.</span>
<span class="cm">         *</span>
<span class="cm">         * TODO Provided this.min and this.max are set, isn&#39;t it possible</span>
<span class="cm">         *      to just use sanitizeValue?</span>
<span class="cm">         */</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">roundToStep</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">min</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">maximum</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">roundToStep</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">max</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">minimum</span> <span class="o">&lt;</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">min</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">maximum</span> <span class="o">&gt;</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">maximum</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cm">/* Determine the initial value of the slider. Prefer an explicitly set</span>
<span class="cm">         * value, whether a scalar or an array. If no value is provided by the</span>
<span class="cm">         * developer, instead fall back to using the minimum.</span>
<span class="cm">         */</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">initialValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">initialValue</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">initialValue</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">value</span> <span class="p">];</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">initialValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">initialValue</span><span class="p">,</span> <span class="nx">initiallyStrict</span><span class="p">);</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-45'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-45">&#182;</a>
        </div>
        <p>An internal method which sets the value of the slider during a drag
event. <code>setValue</code> should be called only after <code>start</code> in the Quinn
instance.</p>

<p>Only when <code>resolve</code> is called is the value considered final. If
<code>reject</code> is called, the tentative value is discarded and the
previous &ldquo;good&rdquo; value is restored.</p>

<p>The new value will be returned (which may differ slightly from the
value you set, if it had to be adjusted to fit the step option, or stay
within the minimum / maximum range). The method will return false if
the value you set resulted in no changes.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Model</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">strict</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">originalValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">newValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">newValue</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">newValue</span> <span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-46'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-46">&#182;</a>
        </div>
        <p>Don&rsquo;t mutate the original array.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">newValue</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">sanitizeValue</span><span class="p">(</span><span class="nx">newValue</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">strict</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">originalValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">values</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-47'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-47">&#182;</a>
        </div>
        <p>When the slider represents only a single value, instead of
setting an array as the value, just use the number.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-roundToStep'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-roundToStep">&#182;</a>
        </div>
        <h3>roundToStep</h3>

<p>Given a number, rounds it to the nearest step.</p>

<p>For example, if options.step is 5, given 4 will round to 5. Given
2 will round to 0, etc. Does not take account of the minimum and
maximum range options.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Model</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">roundToStep</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">multiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">,</span>
            <span class="nx">rounded</span>    <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">number</span> <span class="o">*</span> <span class="nx">multiplier</span><span class="p">)</span> <span class="o">/</span> <span class="nx">multiplier</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">only</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">rounded</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">only</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">number</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">rounded</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">maximum</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">rounded</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">rounded</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">rounded</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">rounded</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-sanitizeValue'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-sanitizeValue">&#182;</a>
        </div>
        <h3>sanitizeValue</h3>

<p>Given a numberic value, snaps it to the nearest step, and ensures that
it is within the selectable minima and maxima.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Model</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sanitizeValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">strict</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">strict</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">roundToStep</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">maximum</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">maximum</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">minimum</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-Renderer'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Renderer">&#182;</a>
        </div>
        <h2>Renderer</h2>

<p>Handles creation of the DOM nodes used by Quinn, as well as redrawing
those elements when the slider value is changed.</p>

<p>You may write your own renderer class and provide it to Quinn using the
<code>renderer: myRenderer</code> option.</p>

<p>Your class needs to define only two public methods:</p>

<p>render:
  Creates the DOM elements for displaying the slider, and inserts them
  into the tree.</p>

<p>redraw:
  Alters DOM elements (normally CSS) so that the visual representation
  of the slider matches the value.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">quinn</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">bindAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="s1">&#39;redraw&#39;</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span>    <span class="o">=</span> <span class="nx">quinn</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">model</span>    <span class="o">=</span> <span class="nx">quinn</span><span class="p">.</span><span class="nx">model</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span>  <span class="o">=</span> <span class="nx">quinn</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span>  <span class="o">=</span> <span class="nx">quinn</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">handles</span>  <span class="o">=</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">lastDraw</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="nx">quinn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;redraw&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">redraw</span><span class="p">);</span>

        <span class="nx">quinn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;handleOn&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">handleIndex</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">handleIndex</span><span class="p">].</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="nx">quinn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;handleOff&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">handleIndex</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">handleIndex</span><span class="p">].</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="nx">quinn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;enabled&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">disabledOpacity</span> <span class="o">!==</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">quinn</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">disabledOpacity</span> <span class="o">!==</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">disabledOpacity</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-render'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-render">&#182;</a>
        </div>
        <h3>render</h3>

<p>Quinn is initialized with an empty wrapper element; render adds the
necessary DOM elements in order to display the slider UI.</p>

<p>render() is called automatically when creating a new Quinn instance.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">marginLeft</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">width</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">adjust</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>

        <span class="kd">function</span> <span class="nx">addRoundingElements</span> <span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;left&quot; /&gt;&#39;</span><span class="p">));</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;main&quot; /&gt;&#39;</span><span class="p">));</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;right&quot; /&gt;&#39;</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">bar</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;bar&quot; /&gt;&#39;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;delta-bar&quot; /&gt;&#39;</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;multiple&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">addRoundingElements</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">addRoundingElements</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;quinn&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-52'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-52">&#182;</a>
        </div>
        <p>Add each of the handles to the bar, and bind the click events.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;handle&quot;&gt;&lt;/span&gt;&#39;</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">on</span><span class="p">(</span><span class="nx">DRAG_START_E</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">startDrag</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">bar</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-53'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-53">&#182;</a>
        </div>
        <p>Adjust the positioning of the handles so that they appear to
&ldquo;dangle&rdquo; over the edge of the bar.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">marginLeft</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">width</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">adjust</span><span class="p">;</span>
        <span class="nx">marginLeft</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">marginLeft</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;marginLeft&#39;</span><span class="p">,</span> <span class="nx">marginLeft</span><span class="p">);</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-54'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-54">&#182;</a>
        </div>
        <p>Finally, these events are triggered when the user seeks to
update the slider.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">DRAG_START_E</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">clickBar</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">redraw</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section- redraw'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section- redraw">&#182;</a>
        </div>
        <h3> redraw</h3>

<p>Moves the slider handle and the delta-bar background elements so that
they accurately represent the value of the slider.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">redraw</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">animate</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">animate</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">animate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">handle</span><span class="p">,</span> <span class="nx">position</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">self</span><span class="p">.</span><span class="nx">lastDraw</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">handle</span>   <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">stop</span><span class="p">();</span>
            <span class="nx">position</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">position</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">adjust</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">animate</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">effects</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">handle</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">position</span> <span class="p">},</span> <span class="p">{</span>
                    <span class="nx">duration</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">effectSpeed</span><span class="p">,</span>
                    <span class="nx">step</span><span class="o">:</span>     <span class="nx">self</span><span class="p">.</span><span class="nx">redrawDeltaBarInStep</span><span class="p">(</span><span class="nx">handle</span><span class="p">)</span>
                <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">handle</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">redrawDeltaBar</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">handle</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">lastDraw</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">);</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-redrawDeltaBar'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-redrawDeltaBar">&#182;</a>
        </div>
        <h3>redrawDeltaBar</h3>

<p>Positions the blue delta bar so that it originates at a position where
the value 0 is. Accepts a <code>value</code> argument so that it may be used
within a <code>step</code> callback in a jQuery <code>animate</code> call.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">redrawDeltaBar</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">handle</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">right</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">handle</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">handle</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">handles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                    <span class="nx">left</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">right</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">left</span>  <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="nx">right</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-57'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-57">&#182;</a>
        </div>
        <p>position with the left edge underneath the handle, and the
right edge at 0</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">left</span>  <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="nx">right</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-58'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-58">&#182;</a>
        </div>
        <p>position with the right edge underneath the handle, and the
left edge at 0</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">right</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="nx">left</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">(</span><span class="nx">left</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">right</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">right</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">(</span><span class="nx">right</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="nx">right</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section- redrawDeltaBarInStep'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section- redrawDeltaBarInStep">&#182;</a>
        </div>
        <h3> redrawDeltaBarInStep</h3>

<p>Draws the delta bar from within the step function during a jQuery
animation.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">redrawDeltaBarInStep</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">handle</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">deltaBar</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">min</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span>
            <span class="nx">max</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">right</span><span class="p">,</span>
            <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">now</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">now</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">/</span> <span class="nx">self</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-60'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-60">&#182;</a>
        </div>
        <p>&ldquo;now&rdquo; is the current &ldquo;left&rdquo; position of the handle.
Convert that to the equivalent value. For example,
if the slider is 0->200, and now is 20, the
equivalent value is 40.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">self</span><span class="p">.</span><span class="nx">redrawDeltaBar</span><span class="p">(</span><span class="nx">now</span> <span class="o">*</span> <span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span><span class="p">)</span> <span class="o">+</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">handle</span><span class="p">);</span>

            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-position'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-position">&#182;</a>
        </div>
        <h3>position</h3>

<p>Given a slider value, returns the position in pixels where the value is
on the slider bar. For example, in a 200px wide bar whose values are
1->100, the value 20 is found 40px from the left of the bar.</p>

<p>If adjust is present, the position will be calculated for a handle so
that it &ldquo;dangles&rdquo; over the edge of the bar by the given number of
pixels.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">adjust</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">delta</span>    <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">right</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span>
            <span class="nx">width</span>    <span class="o">=</span> <span class="nx">adjust</span> <span class="o">?</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="nx">adjust</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
            <span class="nx">position</span> <span class="o">=</span> <span class="p">(((</span><span class="nx">value</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">quinn</span><span class="p">.</span><span class="nx">drawTo</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">))</span> <span class="o">*</span> <span class="nx">width</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-Options'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Options">&#182;</a>
        </div>
        <h3>Options</h3>

<p>Default option values which are used when the user does not explicitly
provide them.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">Quinn</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-63'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-63">&#182;</a>
        </div>
        <p>The minimum value which may be selected by a user.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">min</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-64'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-64">&#182;</a>
        </div>
        <p>The maximum value which may be selected by a user.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">max</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-65'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-65">&#182;</a>
        </div>
        <p>If you wish the slider to be drawn so that it is wider than the
range of values which a user may select, supply the values as a
two-element array.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">drawTo</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-66'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-66">&#182;</a>
        </div>
        <p>The &ldquo;steps&rdquo; by which the selectable value increases. For example,
when set to 2, the default slider will increase in steps from 0, 2,
4, 8, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">step</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-67'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-67">&#182;</a>
        </div>
        <p>The initial value of the slider. null = use the lowest permitted
value.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-68'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-68">&#182;</a>
        </div>
        <p>Snaps the initial value to fit with the given &ldquo;step&rdquo; value. For
example, given a step of 0.1 and an initial value of 1.05, the
value will be changes to fit the step, and rounded to 1.1.</p>

<p>Notes:</p>

<ul>
<li><p>Even with <code>strict</code> disabled, initial values which are outside
the given <code>min</code> and <code>max</code> will still be changed to fit within
the permitted range.</p></li>
<li><p>The <code>strict</code> setting affects the <em>initial value only</em>.</p></li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">strict</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-69'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-69">&#182;</a>
        </div>
        <p>Restrics the values which may be chosen to those listed in the
<code>only</code> array.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">only</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-70'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-70">&#182;</a>
        </div>
        <p>Disables the slider when initialized so that a user may not change
it&rsquo;s value.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">disable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-71'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-71">&#182;</a>
        </div>
        <p>By default, Quinn fades the opacity of the slider to 50% when
disabled, however this may not work perfectly with older Internet
Explorer versions when using transparent PNGs. Setting this to 1.0
will tell Quinn not to fade the slider when disabled.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">disabledOpacity</span><span class="o">:</span> <span class="mf">0.5</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-72'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-72">&#182;</a>
        </div>
        <p>If using Quinn on an element which isn&rsquo;t attached to the DOM, the
library won&rsquo;t be able to determine it&rsquo;s width; supply it as a
number (in pixels).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">width</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-73'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-73">&#182;</a>
        </div>
        <p>If using Quinn on an element which isn&rsquo;t attached to the DOM, the
library won&rsquo;t be able to determine the width of the handle; suppl
it as a number (in pixels).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">handleWidth</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-74'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-74">&#182;</a>
        </div>
        <p>A callback which is run when changing the slider value. Additional
callbacks may be added with Quinn::on(&lsquo;drag&rsquo;).</p>

<p>Arguments:
  number: the altered slider value
  Quinn:  the Quinn instance</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">drag</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-75'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-75">&#182;</a>
        </div>
        <p>Run after the user has finished making a change.</p>

<p>Arguments:
  number: the new slider value
  Quinn:  the Quinn instance</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">change</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-76'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-76">&#182;</a>
        </div>
        <p>Run once after the slider has been constructed.</p>

<p>Arguments:
  number: the current slider value
  Quinn:  the Quinn instance</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">setup</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-77'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-77">&#182;</a>
        </div>
        <p>An optional class which is used to render the Quinn DOM elements
and redraw them when the slider value is changed. This should be
the class; Quinn will create the instance, passing the wrapper
element and the options used when $(&hellip;).quinn() is called.</p>

<p>Arguments:
  Quinn:  the Quinn instance
  object: the options passed to $.fn.quinn</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">renderer</span><span class="o">:</span> <span class="nx">Quinn</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-78'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-78">&#182;</a>
        </div>
        <p>When using animations (such as clicking on the bar), how long
should the duration be? Any jQuery effect duration value is
permitted.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">effectSpeed</span><span class="o">:</span> <span class="s1">&#39;fast&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-79'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-79">&#182;</a>
        </div>
        <p>Set to false to disable all animation on the slider.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">effects</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-80'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-80">&#182;</a>
        </div>
        <hr />
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-81'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-81">&#182;</a>
        </div>
        <p>The jQuery helper function. Permits $(&hellip;).quinn();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">quinn</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">new</span> <span class="nx">Quinn</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">options</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-82'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-82">&#182;</a>
        </div>
        <p>Expose Quinn to the world on $.Quinn.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">$</span><span class="p">.</span><span class="nx">Quinn</span> <span class="o">=</span> <span class="nx">Quinn</span><span class="p">;</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nx">_</span><span class="p">);</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
